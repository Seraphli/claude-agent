# /ca:map — Scan Project Structure

Read `~/.claude/ca/config.md` for global config, then read `.ca/config.md` for workspace config. Workspace values override global values. If neither exists, default to English. Respond in the configured `interaction_language`.

## Behavior

### 1. Check existing map

If `.ca/map.md` already exists, use `AskUserQuestion` with:
- header: "Map"
- question: "A codebase map already exists. What would you like to do?"
- options:
  - "Update" — "Refresh the existing map"
  - "Regenerate" — "Regenerate from scratch"
  - "Cancel" — "Keep the current map"

If **Cancel**: Stop.

### 2. Scan project structure

Scan the project root directory:
- List all top-level directories and files
- For each significant directory, list its contents (1-2 levels deep)
- Identify key files (entry points, configs, READMEs, etc.)
- Skip `.git/`, `node_modules/`, `.ca/`, and other common ignored directories

### 3. Analyze and generate map

For each significant file/directory, write a brief description of its purpose. Generate `.ca/map.md` with:

```
# Codebase Map

> Auto-generated by /ca:map. Last updated: YYYY-MM-DD

## Project Overview
<brief description of what this project does>

## Directory Structure
<tree-like structure with descriptions>

## Key Files
<list of important files with their purposes>
```

### 4. Confirm

Tell the user the map has been generated/updated. Show a summary of what was mapped.
